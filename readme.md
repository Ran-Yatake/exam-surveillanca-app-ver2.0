# Agent Instructions: カンニング防止ツール 要件定義まとめ

本ドキュメントは、**カンニング防止ツール**の要件定義を AI エージェントに読み込ませるための集約資料である。
本内容を前提として、設計・実装・レビュー・提案を行うこと。

---

## 1. システム概要

* オンライン試験における不正行為（カンニング）を抑止・検知するための Web ベース監視ツール
* 受験者 **20〜30名** を対象に、**顔映像＋デスクトップ画面**をリアルタイムで監視
* 監督者はブラウザから複数受験者を同時に確認できる
* インストール不要（ブラウザのみ）

---

## 2. 業務要件（Business Requirements）

* オンライン試験の**公平性と信頼性を担保**すること
* 監督者の**監視負担を軽減**すること
* 不正行為が疑われる場合の**証跡を残せる**こと
* 試験中に異常を**リアルタイムで把握**できること
* 受験者の通信環境差を考慮し、**正当な受験を阻害しない**こと
* 映像・音声・画面情報などの**プライバシーと法令を遵守**すること
* 通信切断などのトラブル時も、**試験継続可否を判断できる運用**を可能とすること

---

## 3. 機能要件（Functional Requirements）

### 主要機能

* 試験（ルーム）の作成・開始・終了
* 受験者の試験参加（URL / 試験コード）
* 受験者カメラ映像のリアルタイム取得・表示
* 受験者デスクトップ画面のリアルタイム共有・表示
* 20〜30名を同時監視できる監督ダッシュボード（グリッド表示）
* 受験者ごとの状態表示（接続、切断、カメラOFF 等）
* 異常検知時のアラート通知（離席、映像消失 等）
* 監督者による手動フラグ・メモ付与
* 異常発生時の証跡保存（ログ、スナップショット、短尺動画）
* 試験終了後のサマリレポート出力
* 監督者・管理者の操作ログ（監査ログ）
* 切断時の自動再接続と通知
* 受験者とのプライべートチャット

---

## 4. 非機能要件（Non-Functional Requirements）

### 性能・容量

* 同時接続：受験者最大30名＋監督者
* 映像・画面共有の遅延：平均2秒以内、最大5秒以内
* 回線状況に応じた自動ビットレート調整

### 可用性・信頼性

* 試験時間帯の稼働率目標：99.9%
* 受験者単位での障害分離
* 切断後30秒以内の再接続試行

### セキュリティ

* 通信の暗号化（TLS / WebRTC）
* 管理者・監督者の認証（MFA 推奨）
* ロールベースの権限制御
* 操作・アクセスの監査ログ取得
* 保存データの暗号化

### プライバシー・法務

* 撮影・録画・保存範囲の事前同意取得
* 証跡データ保持期間：最大30日（自動削除）

### 運用

* 接続数、遅延、切断率の監視
* 障害時の一次切り分けが可能

---

## 5. システム構成要件（System Architecture Requirements）

* Web フロントエンド(React)
  * 受験者画面／監督ダッシュボード
* バックエンド API(Python)
  * 試験管理、状態管理、ログ管理
* リアルタイム通信：WebRTC(AWS Chime SDK)

  * メディア配信方式：SFU
* シグナリング：WebSocket / HTTPS
* データストア：

  * 永続データ（ユーザー、試験、イベント、チャット）
  * 証跡保存用オブジェクトストレージ
  * 監査ログ保存
* クラウド前提（AWS）。IaC による構成管理を想定

---

## 6. 制約条件（Constraints）

* ブラウザ利用のみ（クライアントアプリ不要）
* 対応ブラウザ：Chrome / Edge
* 受験者は1人1端末
* 同時受験者数は最大30名まで
* 不正の最終判断は**必ず人（監督者）**が行う
* 録画・保存は必要最小限とする
* 初期リリースは基本機能に限定（高度なAI判定は対象外）

---

## 7. エージェントへの指示

* 本要件を**前提条件として固定**し、勝手に変更しないこと
* 不明点がある場合は、設計・実装前に確認事項として明示すること
* 自動判定による「即失格」仕様は提案しないこと
* セキュリティ・プライバシーを最優先事項として扱うこと

---

以上
